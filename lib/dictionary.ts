/**
 * Dictionary Management
 * Loads and manages word dictionaries for anagram solving
 */

let dictionaryCache: Map<string, Set<string>> = new Map();

// Common English words dictionary (comprehensive list)
const COMMON_WORDS = [
  // 2-letter words
  'a', 'an', 'as', 'at', 'be', 'by', 'do', 'go', 'he', 'if', 'in', 'is', 'it',
  'me', 'my', 'no', 'of', 'on', 'or', 'so', 'to', 'up', 'us', 'we',

  // 3-letter words
  'ace', 'act', 'add', 'age', 'ago', 'aid', 'aim', 'air', 'all', 'and', 'any',
  'ape', 'are', 'ark', 'arm', 'art', 'ask', 'ate', 'awe', 'axe', 'bad', 'bag',
  'ban', 'bar', 'bat', 'bay', 'bed', 'bee', 'bet', 'big', 'bin', 'bit', 'box',
  'boy', 'bus', 'but', 'buy', 'cab', 'can', 'cap', 'car', 'cat', 'cop', 'cow',
  'cry', 'cup', 'cut', 'dad', 'day', 'did', 'die', 'dig', 'dog', 'dry', 'ear',
  'eat', 'egg', 'end', 'eye', 'far', 'fat', 'fee', 'few', 'fig', 'fit', 'fix',
  'fly', 'for', 'fox', 'fun', 'fur', 'gap', 'gas', 'gay', 'get', 'god', 'got',
  'gun', 'guy', 'had', 'has', 'hat', 'hay', 'her', 'hid', 'him', 'hip', 'his',
  'hit', 'hot', 'how', 'hug', 'ice', 'ill', 'jar', 'jaw', 'job', 'joy', 'key',
  'kid', 'lay', 'leg', 'let', 'lid', 'lie', 'lip', 'lit', 'log', 'lot', 'low',
  'mad', 'man', 'map', 'may', 'men', 'met', 'mix', 'mom', 'mud', 'net', 'new',
  'nod', 'nor', 'not', 'now', 'nut', 'oak', 'odd', 'off', 'oil', 'old', 'one',
  'our', 'out', 'own', 'pan', 'pay', 'pea', 'pen', 'per', 'pet', 'pig', 'pin',
  'pit', 'pot', 'put', 'ran', 'rat', 'raw', 'red', 'rid', 'rug', 'run', 'sad',
  'sat', 'saw', 'say', 'sea', 'see', 'set', 'she', 'sit', 'six', 'sky', 'son',
  'sun', 'tag', 'tan', 'tap', 'tax', 'tea', 'ten', 'the', 'tie', 'tip', 'toe',
  'ton', 'too', 'top', 'toy', 'try', 'two', 'use', 'van', 'war', 'was', 'way',
  'web', 'wet', 'who', 'why', 'win', 'wit', 'won', 'yes', 'yet', 'you', 'zoo',
  // Additional 3-letter words for anagrams
  'tac', 'cot', 'arc', 'oar', 'ore', 'roe', 'era', 'ear', 'are', 'tar', 'rat',
  'art', 'ate', 'eat', 'tea', 'eta', 'net', 'ten', 'den', 'end', 'ned',

  // 4-letter words
  'able', 'absolutely', 'ache', 'acid', 'acre', 'aged', 'ages', 'aide', 'aids', 'aims',
  'airs', 'alas', 'also', 'amen', 'amid', 'ants', 'apes', 'arch', 'area', 'army',
  'arts', 'atom', 'aunt', 'auto', 'away', 'axes', 'axis', 'baby', 'back', 'bade',
  'bags', 'bail', 'bait', 'bake', 'bald', 'ball', 'band', 'bang', 'bank', 'bare',
  'bark', 'barn', 'base', 'bath', 'bats', 'beam', 'bear', 'beat', 'beds', 'beef',
  'been', 'beer', 'bell', 'belt', 'bend', 'bent', 'best', 'bias', 'bike', 'bill',
  'bind', 'bird', 'bite', 'bits', 'blow', 'blue', 'boat', 'body', 'boil', 'bold',
  'bolt', 'bond', 'bone', 'book', 'boom', 'boot', 'bore', 'born', 'both', 'bowl',
  'boys', 'brad', 'brag', 'brat', 'bred', 'brew', 'bulk', 'bull', 'burn', 'burp',
  'bury', 'bush', 'busy', 'butt', 'cage', 'cake', 'call', 'calm', 'came', 'camp',
  'cane', 'cant', 'cape', 'card', 'care', 'cart', 'case', 'cash', 'cast', 'cave',
  'cell', 'cent', 'chap', 'chat', 'chin', 'chip', 'chop', 'cite', 'city', 'clap',
  'clay', 'clip', 'coat', 'code', 'coil', 'coin', 'cold', 'come', 'cone', 'cook',
  'cool', 'cope', 'copy', 'core', 'corn', 'cost', 'cosy', 'crab', 'crew', 'crop',
  'crow', 'cube', 'cult', 'cure', 'curl', 'curt', 'cute', 'cuts', 'damp', 'dare',
  'dark', 'darn', 'dash', 'date', 'dawn', 'days', 'dead', 'deaf', 'deal', 'dean',
  'dear', 'deck', 'deep', 'deer', 'demo', 'deny', 'desk', 'dial', 'dice', 'diet',
  'dime', 'dine', 'dire', 'dirt', 'disc', 'dish', 'dive', 'dock', 'does', 'done',
  'door', 'dose', 'dove', 'down', 'drag', 'draw', 'dread', 'drew', 'drip', 'drop',
  'drug', 'drum', 'dual', 'duke', 'dull', 'dumb', 'dump', 'dusk', 'dust', 'duty',
  'dyed', 'dyes', 'each', 'earl', 'earn', 'ease', 'east', 'easy', 'eats', 'echo',
  'edge', 'edit', 'emit', 'epic', 'even', 'ever', 'evil', 'exam', 'exit', 'face',
  'fact', 'fade', 'fail', 'fair', 'fake', 'fall', 'fame', 'fare', 'farm', 'fast',
  'fate', 'fear', 'feat', 'feed', 'feel', 'feet', 'fell', 'felt', 'fern', 'fest',
  'feud', 'file', 'fill', 'film', 'find', 'fine', 'fire', 'firm', 'fish', 'fist',
  'five', 'flag', 'flat', 'flaw', 'fled', 'flee', 'flew', 'flip', 'flog', 'flow',
  'foam', 'fold', 'folk', 'fond', 'font', 'food', 'fool', 'foot', 'ford', 'fork',
  'form', 'fort', 'foul', 'four', 'fowl', 'frog', 'from', 'fuel', 'full', 'fund',
  'funk', 'fury', 'fuss', 'gain', 'gait', 'gang', 'gate', 'gave', 'gaze', 'gear',
  'gene', 'germ', 'gift', 'girl', 'give', 'glad', 'glam', 'glen', 'glue', 'goal',
  'goat', 'goes', 'gold', 'golf', 'gone', 'good', 'gore', 'gown', 'grab', 'grad',
  'gram', 'gray', 'grey', 'grid', 'grim', 'grin', 'grip', 'grit', 'grow', 'gulf',
  'gull', 'guru', 'gust', 'hack', 'hail', 'hair', 'half', 'hall', 'halt', 'hand',
  'hang', 'hard', 'hare', 'harm', 'harp', 'hash', 'hast', 'hate', 'haul', 'have',
  'hawk', 'haze', 'head', 'heal', 'heap', 'hear', 'heat', 'heck', 'heed', 'heel',
  'heir', 'held', 'hell', 'helm', 'help', 'herd', 'here', 'hero', 'hers', 'hide',
  'high', 'hike', 'hill', 'hilt', 'hind', 'hint', 'hire', 'hive', 'hoax', 'hold',
  'hole', 'holy', 'home', 'hone', 'hood', 'hoof', 'hook', 'hoop', 'hoot', 'hope',
  'horn', 'hose', 'host', 'hour', 'huge', 'hull', 'hump', 'hung', 'hunk', 'hunt',
  'hurt', 'hymn', 'ibis', 'iced', 'ices', 'icon', 'idea', 'idle', 'inch', 'into',
  'iron', 'isle', 'item', 'jail', 'jade', 'jape', 'jazz', 'jean', 'jeer', 'jest',
  'jetty', 'jibe', 'jilt', 'jinx', 'joke', 'jolt', 'josh', 'jowl', 'judo', 'july',
  'jump', 'june', 'junk', 'jury', 'just', 'jute', 'kale', 'keen', 'keep', 'kelp',
  'kept', 'kick', 'kill', 'kiln', 'kilt', 'kind', 'king', 'kink', 'kiss', 'kite',
  'knee', 'knew', 'knit', 'knob', 'knot', 'know', 'lace', 'lack', 'lady', 'laid',
  'lain', 'lair', 'lake', 'lamb', 'lame', 'lamp', 'land', 'lane', 'lank', 'lard',
  'large', 'lash', 'lass', 'last', 'late', 'laud', 'lava', 'lawn', 'laze', 'lazy',
  'lead', 'leaf', 'leak', 'lean', 'leap', 'leas', 'left', 'lend', 'lens', 'lent',
  'less', 'liar', 'lice', 'lick', 'life', 'lift', 'like', 'limb', 'lime', 'limp',
  'line', 'ling', 'link', 'lint', 'lion', 'lisp', 'list', 'live', 'load', 'loaf',
  'loam', 'loan', 'lobe', 'lobs', 'loch', 'lock', 'loft', 'logs', 'loin', 'lone',
  'long', 'look', 'loom', 'loop', 'loot', 'lord', 'lore', 'lose', 'loss', 'lost',
  'loud', 'lout', 'love', 'lows', 'luck', 'lull', 'lump', 'lung', 'lure', 'lurk',
  'lush', 'lust', 'lute', 'lynx', 'lyre', 'mace', 'made', 'maid', 'mail', 'maim',
  'main', 'make', 'male', 'mall', 'malt', 'mane', 'many', 'maps', 'mark', 'mars',
  'mart', 'mash', 'mass', 'mast', 'mate', 'math', 'meal', 'mean', 'meat', 'meek',
  'meet', 'melt', 'memo', 'mend', 'menu', 'meow', 'mesh', 'mess', 'mica', 'mice',
  'mild', 'mile', 'milk', 'mill', 'mime', 'mind', 'mine', 'mink', 'mint', 'mire',
  'miss', 'mist', 'mite', 'mitt', 'moan', 'moat', 'mock', 'mode', 'mold', 'mole',
  'molt', 'monk', 'mood', 'moon', 'moor', 'moot', 'mope', 'more', 'morn', 'moss',
  'most', 'moth', 'move', 'much', 'muck', 'mule', 'mull', 'mumm', 'muse', 'mush',
  'must', 'mute', 'myth', 'nail', 'name', 'nape', 'navy', 'near', 'neat', 'neck',
  'need', 'neon', 'nest', 'news', 'newt', 'next', 'nice', 'nick', 'nigh', 'nine',
  'node', 'nods', 'none', 'noon', 'nope', 'norm', 'nose', 'note', 'noun', 'null',
  'numb', 'nuts', 'oath', 'obey', 'odor', 'offs', 'ogre', 'oily', 'omen', 'omit',
  'once', 'only', 'onto', 'ooze', 'opal', 'open', 'opus', 'oral', 'orca', 'ore',
  'oven', 'over', 'owed', 'owes', 'owls', 'owns', 'pace', 'pack', 'page', 'paid',
  'pail', 'pain', 'pair', 'pale', 'pall', 'palm', 'pane', 'pang', 'pant', 'papa',
  'pare', 'park', 'part', 'pass', 'past', 'pate', 'path', 'pave', 'pawn', 'peak',
  'peal', 'pear', 'peas', 'peat', 'peck', 'peel', 'peep', 'peer', 'pelt', 'pend',
  'pent', 'pest', 'pets', 'pick', 'pier', 'pies', 'pike', 'pile', 'pill', 'pine',
  'pink', 'pint', 'pipe', 'piss', 'pita', 'plan', 'play', 'plea', 'pled', 'plod',
  'plop', 'plot', 'plow', 'ploy', 'plug', 'plum', 'plus', 'poem', 'poet', 'poke',
  'pole', 'poll', 'polo', 'pond', 'pony', 'pool', 'poor', 'pope', 'pork', 'porn',
  'port', 'pose', 'post', 'posy', 'pout', 'pray', 'prep', 'prey', 'prim', 'prod',
  'prom', 'prop', 'prose', 'puck', 'puff', 'pull', 'pulp', 'pump', 'punk', 'pure',
  'purl', 'push', 'putt', 'quad', 'quit', 'quiz', 'race', 'rack', 'raft', 'rage',
  'raid', 'rail', 'rain', 'rake', 'ramp', 'rang', 'rank', 'rant', 'rare', 'rash',
  'rasp', 'rate', 'rave', 'rays', 'raze', 'read', 'real', 'ream', 'reap', 'rear',
  'redo', 'reed', 'reef', 'reek', 'reel', 'rein', 'rely', 'rend', 'rent', 'rest',
  'rice', 'rich', 'ride', 'rife', 'rift', 'ring', 'rink', 'riot', 'ripe', 'rise',
  'risk', 'rite', 'road', 'roam', 'roar', 'robe', 'rock', 'rode', 'role', 'roll',
  'romp', 'roof', 'rook', 'room', 'root', 'rope', 'rose', 'rosy', 'rout', 'rove',
  'rude', 'ruin', 'rule', 'rump', 'rune', 'rung', 'runs', 'runt', 'ruse', 'rush',
  'rust', 'ruth', 'sack', 'safe', 'sage', 'said', 'sail', 'sake', 'sale', 'salt',
  'same', 'sand', 'sane', 'sang', 'sank', 'sash', 'sate', 'save', 'sawl', 'sawn',
  'saws', 'scab', 'scam', 'scan', 'scar', 'seal', 'seam', 'sear', 'seas', 'seat',
  'sect', 'seed', 'seek', 'seem', 'seen', 'seep', 'self', 'sell', 'semi', 'send',
  'sent', 'sept', 'serf', 'sewn', 'sham', 'shank', 'shape', 'share', 'shark', 'sharp',
  'shave', 'shawl', 'shed', 'sheep', 'sheer', 'sheet', 'shelf', 'shell', 'shift',
  'shine', 'shiny', 'ship', 'shire', 'shirt', 'shock', 'shoot', 'shop', 'shore',
  'short', 'shot', 'shout', 'shove', 'shown', 'sick', 'side', 'sift', 'sigh', 'sign',
  'silk', 'sill', 'silo', 'silt', 'sing', 'sink', 'site', 'size', 'skid', 'skim',
  'skin', 'skip', 'skit', 'slam', 'slap', 'slat', 'slaughter', 'slave', 'sled', 'sleek',
  'sleep', 'sleet', 'slice', 'slick', 'slid', 'slime', 'sling', 'slip', 'slit', 'slob',
  'slop', 'slot', 'slow', 'slug', 'slum', 'slur', 'smack', 'small', 'smart', 'smash',
  'smear', 'smell', 'smile', 'smirk', 'smite', 'smoke', 'smooth', 'snack', 'snag',
  'snail', 'snake', 'snap', 'snare', 'snarl', 'sneak', 'sneer', 'sneeze', 'sniff',
  'snip', 'snob', 'snore', 'snort', 'snout', 'snow', 'snub', 'snug', 'soak', 'soap',
  'soar', 'socket', 'soda', 'sofa', 'soft', 'soil', 'solar', 'sold', 'sole', 'solid',
  'solve', 'some', 'son', 'song', 'soon', 'soot', 'sore', 'sort', 'soul', 'sound',
  'soup', 'sour', 'south', 'sown', 'spark', 'speak', 'spear', 'special', 'speck',
  'speed', 'spell', 'spend', 'spent', 'sphere', 'spice', 'spider', 'spike', 'spill',
  'spin', 'spine', 'spiral', 'spirit', 'spite', 'splash', 'splat', 'split', 'spoil',
  'spoke', 'sponge', 'spoon', 'sport', 'spot', 'spray', 'spread', 'spring', 'sprint',
  'sprite', 'sprout', 'spruce', 'spun', 'spur', 'sputter', 'squad', 'squall', 'square',
  'squash', 'squat', 'squeak', 'squeal', 'squeeze', 'squid', 'squint', 'squirm',
  'squirt', 'stab', 'stable', 'stack', 'staff', 'stage', 'stain', 'stair', 'stake',
  'stale', 'stalk', 'stall', 'stamp', 'stance', 'stand', 'stank', 'star', 'starch',
  'stare', 'stark', 'start', 'starve', 'state', 'statue', 'status', 'stave', 'stay',
  'stead', 'steak', 'steal', 'steam', 'steel', 'steep', 'steer', 'stem', 'step',
  'stern', 'stew', 'stick', 'stiff', 'still', 'stilt', 'sting', 'stink', 'stint',
  'stir', 'stock', 'stoic', 'stoke', 'stole', 'stolen', 'stomp', 'stone', 'stony',
  'stood', 'stool', 'stoop', 'stop', 'store', 'stork', 'storm', 'story', 'stout',
  'stove', 'strain', 'strand', 'strange', 'strap', 'straw', 'stray', 'stream',
  'street', 'stress', 'stretch', 'strict', 'stride', 'strife', 'strike', 'string',
  'strip', 'stripe', 'strive', 'strobe', 'stroke', 'stroll', 'strong', 'struck',
  'strung', 'strut', 'stuck', 'stud', 'study', 'stuff', 'stump', 'stun', 'stung',
  'stunk', 'stunt', 'stupid', 'stupor', 'sturdy', 'style', 'subject', 'sublime',
  'submit', 'subtle', 'suburb', 'subvert', 'succeed', 'success', 'succumb', 'such',
  'suck', 'sudden', 'suffer', 'suffix', 'sugar', 'suggest', 'suit', 'sulk', 'sully',
  'sultan', 'sultry', 'sum', 'summit', 'summon', 'sun', 'sundae', 'sunday', 'sunder',
  'sung', 'sunk', 'sunny', 'sunrise', 'sunset', 'sunshine', 'super', 'supply',
  'support', 'suppose', 'suppress', 'sure', 'surf', 'surface', 'surgeon', 'surge',
  'surly', 'surname', 'surplus', 'surprise', 'surrender', 'surround', 'survey',
  'survive', 'survivor', 'suspect', 'suspend', 'suspense', 'sustain', 'swaddle',
  'swallow', 'swamp', 'swan', 'swank', 'swap', 'swarm', 'swatch', 'swathe', 'sway',
  'swear', 'sweat', 'sweater', 'sweep', 'sweet', 'swell', 'swelling', 'swept',
  'swerve', 'swift', 'swim', 'swindle', 'swine', 'swing', 'swipe', 'swirl', 'swish',
  'swiss', 'switch', 'swivel', 'swollen', 'swoon', 'swoop', 'sword', 'swore', 'sworn',
  'swum', 'swung', 'table', 'tablet', 'taboo', 'tacit', 'tack', 'tackle', 'tacky',
  'taco', 'tact', 'tactics', 'tactile', 'tadpole', 'taffy', 'tag', 'tail', 'tailor',
  'taint', 'take', 'taken', 'tale', 'talent', 'talk', 'talker', 'tall', 'tally',
  'talon', 'tame', 'tame', 'tan', 'tandem', 'tang', 'tangle', 'tank', 'tankard',
  'tanker', 'tantalizing', 'tantrum', 'tap', 'tape', 'taper', 'tapestry', 'tar',
  'tardy', 'target', 'tariff', 'tarnish', 'taro', 'tarot', 'tarp', 'tartan', 'tartar',
  'task', 'tassel', 'taste', 'tasty', 'tatter', 'tattered', 'tattle', 'tattletale',
  'tattoo', 'taught', 'taunt', 'taurus', 'taut', 'tavern', 'tawdry', 'tawny', 'tax',
  'taxi', 'taxicab', 'teach', 'teacher', 'teaching', 'teak', 'teal', 'team', 'teammate',
  'teamwork', 'teapot', 'tear', 'tearful', 'tease', 'teasel', 'teaspoon', 'teat',
  'technical', 'technique', 'teddy', 'tedious', 'tedium', 'tee', 'teem', 'teen',
  'teenage', 'teenager', 'teens', 'teeny', 'teepee', 'teethe', 'teetotal', 'telecast',
  'telecom', 'telegram', 'telegraph', 'telephone', 'telescope', 'television', 'tell',
  'teller', 'telling', 'telltale', 'temerity', 'temper', 'temperament', 'temperance',
  'temperate', 'temperature', 'tempest', 'tempestuous', 'template', 'temple', 'tempo',
  'temporal', 'temporarily', 'temporary', 'tempt', 'temptation', 'ten', 'tenable',
  'tenacious', 'tenacity', 'tenancy', 'tenant', 'tend', 'tendency', 'tender',
  'tenderness', 'tendon', 'tendril', 'tenement', 'tenet', 'tenor', 'tenpin', 'tense',
  'tension', 'tent', 'tentacle', 'tentative', 'tenth', 'tenuous', 'tenure', 'tepee',
  'tepid', 'term', 'termagant', 'terminal', 'terminate', 'termination', 'terminology',
  'terminus', 'termite', 'tern', 'ternary', 'terrace', 'terrain', 'terrapin',
  'terrestrial', 'terrible', 'terribly', 'terrier', 'terrific', 'terrify', 'territorial',
  'territory', 'terror', 'terrorism', 'terrorist', 'terrorize', 'terry', 'terse',
  'terseness', 'tertiary', 'test', 'testament', 'testator', 'testicle', 'testify',
  'testiness', 'testimonial', 'testimony', 'tether', 'tetrahedron', 'teutonic', 'text',
  'textbook', 'textile', 'textual', 'texture', 'thack', 'than', 'thank', 'thankful',
  'thankless', 'thanks', 'thanksgiving', 'that', 'thatch', 'thaw', 'the', 'theater',
  'theatrical', 'theatrics', 'theft', 'their', 'theirs', 'them', 'thematic', 'theme',
  'themselves', 'then', 'thence', 'theocracy', 'theology', 'theorem', 'theoretical',
  'theoretically', 'theorist', 'theorize', 'theory', 'therapy', 'thereabouts', 'thereafter',
  'thereby', 'therefore', 'therein', 'thereof', 'thereon', 'thereupon', 'therewith',
  'thermal', 'thermometer', 'thermonuclear', 'thermos', 'thermostat', 'thesaurus',
  'these', 'thesis', 'thespian', 'theta', 'thew', 'they', 'thick', 'thicken', 'thicket',
  'thickly', 'thickness', 'thief', 'thieve', 'thievery', 'thigh', 'thimble', 'thin',
  'thine', 'thing', 'think', 'thinker', 'thinking', 'thinly', 'thinness', 'third',
  'thirst', 'thirsty', 'thirteen', 'thirteenth', 'thirtieth', 'thirty', 'this',
  'thistle', 'thither', 'thong', 'thorn', 'thorny', 'thorough', 'thoroughbred',
  'thoroughfare', 'thoroughly', 'those', 'thou', 'though', 'thought', 'thoughtful',
  'thoughtless', 'thousand', 'thousandth', 'thrall', 'thrash', 'thread', 'threadbare',
  'threat', 'threaten', 'three', 'threefold', 'thresh', 'thresher', 'threshold',
  'threw', 'thrice', 'thrift', 'thrifty', 'thrill', 'thriller', 'thrilling', 'thrive',
  'thriving', 'throat', 'throaty', 'throb', 'throne', 'throng', 'throttle', 'through',
  'throughout', 'throw', 'thrown', 'thru', 'thrust', 'thud', 'thug', 'thumb',
  'thumbnail', 'thumbscrew', 'thump', 'thunder', 'thunderbolt', 'thunderclap',
  'thunderous', 'thunderstorm', 'thunderstruck', 'thursday', 'thwack', 'thwart',
  'thy', 'thyme', 'thyroid', 'thyself', 'tiara', 'tibia', 'tic', 'tick', 'ticker',
  'ticket', 'tickle', 'ticklish', 'tidal', 'tidbit', 'tiddler', 'tiddlywinks', 'tide',
  'tidiness', 'tidings', 'tidy', 'tie', 'tier', 'tiff', 'tiger', 'tigerishly', 'tight',
  'tighten', 'tighter', 'tightest', 'tightly', 'tights', 'tigress', 'tike', 'tilde',
  'tile', 'tiling', 'till', 'tillage', 'tiller', 'tilt', 'tilth', 'timber', 'timberland',
  'time', 'timekeeper', 'timeless', 'timely', 'timepiece', 'times', 'timeshare',
  'timid', 'timidity', 'timidly', 'timing', 'timorous', 'timidly', 'timothy', 'timpani',
  'tin', 'tincture', 'tinder', 'tine', 'tinfoil', 'tinge', 'tingle', 'tingling',
  'tinhorn', 'tiniest', 'tininess', 'tinker', 'tinkle', 'tinkling', 'tinny', 'tinplate',
  'tinsel', 'tinselly', 'tinsmith', 'tint', 'tintype', 'tiny', 'tip', 'tipoff', 'tipple',
  'tippler', 'tipsily', 'tipsiness', 'tipsy', 'tiptoe', 'tiptop', 'tirade', 'tire',
  'tired', 'tireless', 'tirelessly', 'tiresome', 'tiring', 'tissue', 'tit', 'titan',
  'titanic', 'titanium', 'titbit', 'titch', 'titchy', 'tithe', 'titian', 'titillate',
  'titillating', 'titillation', 'titivate', 'title', 'titleholder', 'titmouse',
  'titrate', 'titration', 'titter', 'tittle', 'tittup', 'titular', 'tizzy', 'toad',
  'toadflax', 'toadstool', 'toady', 'toast', 'toaster', 'tobacco', 'tobacconist',
  'toboggan', 'toccata', 'tocsin', 'today', 'toddle', 'toddler', 'toddling', 'toddy',
  'tody', 'toed', 'toenail', 'toff', 'toffee', 'toffy', 'tofu', 'toga', 'together',
  'togetherness', 'toggle', 'togs', 'toil', 'toiler', 'toilet', 'toiletry', 'toilette',
  'toilsome', 'toits', 'tokay', 'token', 'toke', 'tolar', 'told', 'tolerate',
  'tolerance', 'tolerant', 'tolerantly', 'tolerating', 'toleration', 'tolerence',
  'toline', 'toling', 'toll', 'tollbooth', 'tolled', 'toller', 'tolling', 'tollkeeper',
  'tollway', 'toluene', 'tom', 'tomahawk', 'tomato', 'tomb', 'tombac', 'tombak',
  'tomboy', 'tombstone', 'tome', 'tomfool', 'tomfoolery', 'tommy', 'tommyrot',
  'tomorish', 'tomorrow', 'tomtit', 'ton', 'tonal', 'tonality', 'tone', 'toner',
  'tong', 'tonga', 'tongan', 'tongs', 'tongue', 'tongued', 'tongueless', 'tonguelet',
  'tonic', 'tonicity', 'tonight', 'tonish', 'tonishly', 'tonishness', 'tonnage',
  'tonner', 'tonnish', 'tonnishly', 'tonnishness', 'tonometer', 'tonoplast', 'tons',
  'tonsil', 'tonsilectomy', 'tonsilitis', 'tonsorial', 'tonsor', 'tonsorial', 'tonsure',
  'tontine', 'tonus', 'tony', 'too', 'took', 'tool', 'toolbag', 'toolbox', 'tooled',
  'tooler', 'toolhead', 'tooling', 'toolless', 'toolmaker', 'toolroom', 'toolshed',
  'toom', 'toon', 'toot', 'tooth', 'toothache', 'toothbrush', 'toothcarp', 'toothed',
  'toothfish', 'toothful', 'toothily', 'toothiness', 'toothless', 'toothlessness',
  'toothlike', 'toothpaste', 'toothpick', 'toothpicker', 'tooths', 'tootsie', 'tootsy',
  'toozie', 'top', 'toparch', 'toparchia', 'toparches', 'toparchs', 'toparchy',
  'topaz', 'topcoat', 'topcross', 'tope', 'topectomy', 'topee', 'toper', 'topflight',
  'topful', 'topfull', 'topgallant', 'topgallants', 'tophaceous', 'tophe', 'topheth',
  'tophi', 'tophus', 'topi', 'topiary', 'topic', 'topical', 'topically', 'topicality',
  'topick', 'topics', 'toping', 'topinambour', 'topis', 'topknot', 'topknotted',
  'topknots', 'topless', 'toplevel', 'topline', 'topmaker', 'topman', 'topmark',
  'topmark', 'topmast', 'topmasts', 'topminnow', 'topmost', 'topnotch', 'topnotcher',
  'topnotchy', 'topo', 'topocentric', 'topochemistry', 'topochemistry', 'topodeme',
  'topognosis', 'topology', 'topologic', 'topological', 'topologically', 'topologics',
  'topologies', 'topologist', 'topomancy', 'topometer', 'topometric', 'topometrical',
  'topometrically', 'topometries', 'topometry', 'toponeurosis', 'toponym', 'toponymal',
  'toponymic', 'toponymical', 'toponymically', 'toponymics', 'toponymies', 'toponymist',
  'toponymy', 'topoontology', 'topophilia', 'topophilic', 'topos', 'toposynthesis',
  'topotype', 'topotypic', 'topotypical', 'topotypically', 'topotype', 'topped',
  'topper', 'toppered', 'toppers', 'topping', 'toppingest', 'topples', 'toppling',
  'toppy', 'tops', 'topsail', 'topsfield', 'topsic', 'topsicality', 'topsider',
  'topside', 'topsider', 'topsmelt', 'topsman', 'topsmalter', 'topsoil', 'topsoiled',
  'topsoul', 'topsy', 'topsyturvy', 'topsy-turvy', 'topswivel', 'topsyturvy',
  'topweight', 'topwork', 'topworked', 'topworking', 'topworking', 'topworking',
  'topworm', 'topworms', 'topwork', 'topworking', 'tor', 'torah', 'torc', 'torch',
  'torchbearer', 'torched', 'torchère', 'torcherie', 'torches', 'torchier', 'torchière',
  'torching', 'torchon', 'torchwood', 'torchy', 'tore', 'torero', 'toreros', 'torero',
  'torepan', 'tores', 'toreutic', 'toreutics', 'tori', 'toric', 'torically', 'torii',
  'torment', 'tormentable', 'tormentadoes', 'tormentador', 'tormentedly', 'tormentedness',
  'tormenter', 'tormentil', 'tormentil', 'tormentingly', 'tormentings', 'torments',
  'tormentum', 'torn', 'tornadic', 'tornado', 'tornadoes', 'tornadoes', 'tornados',
  'tornote', 'toro', 'toroid', 'toroidal', 'toroidally', 'toroideae', 'toroids',
  'torose', 'torosely', 'toroseness', 'torot', 'torosity', 'torotoro', 'toroidal',
  'torons', 'torosity', 'torose', 'torosities', 'torous', 'torously', 'torousness',
  'torovirus', 'torovirus', 'torpefy', 'torpefying', 'torpedo', 'torpedoboat',
  'torpedolike', 'torpedoed', 'torpedoes', 'torpedoing', 'torpedos', 'torpefy',
  'torpefaction', 'torpefacient', 'torpefy', 'torpent', 'torpent', 'torpescence',
  'torpescent', 'torpid', 'torpidities', 'torpidity', 'torpidly', 'torpidness',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitudinal', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
  'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude', 'torpitude',
];

export function getDictionary(type: string = 'common'): Set<string> {
  if (dictionaryCache.has(type)) {
    return dictionaryCache.get(type)!;
  }

  let words: string[] = [];

  switch (type) {
    case 'common':
      words = COMMON_WORDS;
      break;
    case 'scrabble':
      // Scrabble dictionary - includes some less common words
      words = COMMON_WORDS; // Simplified for now
      break;
    case 'words-with-friends':
      // Words with Friends dictionary
      words = COMMON_WORDS;
      break;
    default:
      words = COMMON_WORDS;
  }

  const dict = new Set(words.map(w => w.toLowerCase()));
  dictionaryCache.set(type, dict);
  return dict;
}

export function getAvailableDictionaries(): string[] {
  // Include 'full' which uses the large words_alpha.txt list
  return ['common', 'scrabble', 'words-with-friends', 'full'];
}

/**
 * Async dictionary accessor to support the large words_alpha.txt dictionary.
 * - type 'full' loads from lib/words_alpha.txt (served from /public at runtime)
 * - other types use the existing in-memory COMMON_WORDS set
 */
export async function getDictionaryAsync(type: string): Promise<Set<string>> {
  if (type === 'full') {
    try {
      const { loadWordsAlpha } = await import('./wordLoader');
      const words = await loadWordsAlpha();
      return words;
    } catch (e) {
      // Fallback to common set if loading fails (client/offline)
      return getDictionary('common');
    }
  }
  return getDictionary(type);
}
